"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[545],{545:function(t,e,r){r.r(e);var n=r(152),c=r(791),a=r(871),o=r(504),u=r(577),s=r(184);e.default=function(){var t=(0,c.useState)(""),e=(0,n.Z)(t,2),r=e[0],i=e[1],p=(0,c.useState)([]),f=(0,n.Z)(p,2),l=f[0],h=f[1],v=(0,u.Z)().searchFilmByName,d=(0,a.s0)(),m={query:r},w=(0,a.TH)().search;(0,c.useEffect)((function(){var t;w&&(t=w.split("=")[1],v(t).then((function(t){return h(t)})))}),[w]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{onChange:function(t){return i(t.target.value)},type:"text"}),(0,s.jsx)("button",{onClick:function(){return d({pathname:"/movies",search:"?".concat((0,o.fW)(m))})},children:"search"}),(0,s.jsx)("ul",{children:l.map((function(t){return(0,s.jsx)("li",{children:(0,s.jsx)(o.rU,{to:"".concat(t.id),children:t.title})},t.id)}))})]})}},577:function(t,e,r){r.d(e,{Z:function(){return s}});var n=r(861),c=r(757),a=r.n(c),o=r(152),u=r(791),s=function(){var t=function(){var t=(0,u.useState)("waiting"),e=(0,o.Z)(t,2),r=e[0],c=e[1],s=(0,u.useCallback)(function(){var t=(0,n.Z)(a().mark((function t(e){var r,n,o,u,s,i=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,o=i.length>3&&void 0!==i[3]?i[3]:{"Content-Type":"application/json"},c("loading"),t.prev=4,t.next=7,fetch(e,{method:r,body:n,headers:o});case 7:if((u=t.sent).ok){t.next=10;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(u.status));case 10:return t.next=12,u.json();case 12:return s=t.sent,t.abrupt("return",s);case 16:throw t.prev=16,t.t0=t.catch(4),c("error"),t.t0;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}(),[]);return{request:s,clearError:(0,u.useCallback)((function(){c("loading")}),[]),process:r,setProcess:c}}(),e=t.request,r=t.clearError,c=t.process,s=t.setProcess,i="https://api.themoviedb.org/3/",p="api_key=a01a0779b6da55b3cb3231f967e502fc",f=function(){var t=(0,n.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(i,"trending/movie/day?").concat(p));case 2:return r=t.sent,console.log(r),t.abrupt("return",r.results.map(m));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=(0,n.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(i,"search/movie?").concat(p,"&query=").concat(r));case 2:return n=t.sent,t.abrupt("return",n.results.map(m));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=(0,n.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(i,"movie/").concat(r,"?").concat(p));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=(0,n.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(i,"movie/").concat(r,"/credits?").concat(p));case 2:return n=t.sent,t.abrupt("return",n.cast.map(w));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=(0,n.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(i,"movie/").concat(r,"/reviews?").concat(p));case 2:return n=t.sent,console.log(n),t.abrupt("return",n.results.map(x));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(t){return{id:t.id,title:t.title}},w=function(t){return{id:t.id,profile_path:t.profile_path,name:t.name,character:t.character}},x=function(t){return{id:t.id,author:t.author,content:t.content}};return{clearError:r,process:c,setProcess:s,getTrandingToday:f,searchFilmByName:l,getMovieDetails:h,getMovieCredits:v,getMovieReviews:d}}}}]);
//# sourceMappingURL=545.fc742471.chunk.js.map